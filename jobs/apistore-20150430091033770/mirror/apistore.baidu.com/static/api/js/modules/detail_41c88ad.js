define("api:static/js/modules/detail.js",function(require,exports,module){function versionChangeEvent(){$("#js-version-select").on("change",function(){window.location="/astore/serviceinfo?serviceId="+$(this).val()})}function followEvent(){$("#js-add-follow").on("click",function(){var e=$(this);e.hasClass("followed")||e.hasClass("disabled")||(e.addClass("disabled"),Util.ajaxPost("/astore/servicefavoriteadd",{serviceId:$("#js-service-detail").attr("data")},function(s){e.addClass("followed"),e.siblings(".follow-count").text(s.followedCount)},function(e){Util.error(e)},function(){Util.error("收藏操作失败")},function(){e.removeClass("disabled")}))})}function tabChangeEvent(){$("#js-service-navi-list").on("click",".js-navi-item",function(){var e=$(this),s=e.hasClass("active"),i=e.index(),a=$("#js-service-cont-list .js-service-cont-item");s||(e.addClass("active").siblings().removeClass("active"),a.eq(i).show().siblings().hide())})}function bdShare(){with(serviceName=$("[data-service-name]").attr("data-service-name"),window._bd_share_config={common:{bdSnsKey:{},bdText:"向大家推荐一个不错的开发者服务："+serviceName+"。API Store，聚合众多开发服务，让开发工作更简单。",bdMini:"1",bdMiniList:!1,bdPic:"",bdStyle:"1",bdSize:"24"},share:{bdCustomStyle:"/static/api/css/bdShare_0fba0f1.css"}},document)0[(getElementsByTagName("head")[0]||body).appendChild(createElement("script")).src="http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion="+~(-new Date/36e5)]}function showClaimSuccModal(){if(!$("#jquery-msg-content").length){var e='<h4 class="fwn fs15 c_333 ml40">提交成功</h4><p class="c_999 mt5 ml40">我们承若在2个工作日完成审核工作，</br>可在【个人中心 > 我的服务】，查看审核状态。</p>';$.msg({autoUnblock:!1,clickUnblock:!1,content:'<div class="modal_bg"><div class="msg_modal claim-service-modal"><h3 class="msg_modal_title"></h3>'+e+'<div class="msg_modal_opt ml40 mt30"><a class="opt-btn btn-blue dib" id="js_modal_close_btn" href="javascript: void 0">确定</a></div></div><a id="js_modal_close_icon" class="modal_close_icon" href="javascript: void 0"></a></div>',klass:"white-on-blue",afterBlock:function(){document.getElementById("jquery-msg-content").style.filter="progid:DXImageTransform.Microsoft.gradient(startcolorstr=#AA164188,endcolorstr=#AA164188)";var e=this;$("#js_modal_close_btn, #js_modal_close_icon").on("click",function(){e.unblock(),window.location.reload()})}})}}function claimServiceEvent(){$("#js-claim-service").on("click",function(){if(!$("#jquery-msg-content").length){var e='<h4 class="fwn fs15 c_333 ml40">申请管理权限</h4><p class=" c_999 mt5 ml40">申请成功后，您将拥有对服务信息管理的权限。</p>';$.msg({autoUnblock:!1,clickUnblock:!1,content:'<div class="modal_bg"><div class="msg_modal claim-service-modal"><h3 class="msg_modal_title"></h3>'+e+'<div class="msg_modal_opt ml40 mt30"><div id="js-verify-comfrim" class="dn"><a class="opt-btn btn-base-flex btn-blue" href="javascript: void 0" data-verify-succ>信息已补全</a><a class="opt-btn btn-base-flex btn-orange ml20" href="/astore/help?tag=fdb" target="_blank" data-verify-problem>遇到问题</a></div><div id="js-claim-comfirm"><a class="opt-btn btn-gray disabled dn" id="js-claim-service-btn" href="javascript: void 0">申请</a><span class="claim-modal-tiper ml20 c_333 dn" data-tiper>您还未补全<a href="/astore/usercenter?menu=userInfo" class="" target="_blank" data-fill-userinfo>个人信息及验证邮箱</a>，暂不能申请</span></div></div></div><a id="js_modal_close_icon" class="modal_close_icon" href="javascript: void 0"></a></div>',klass:"white-on-blue",afterBlock:function(){function e(e,s){if("retry"===s){if(e.hasClass("disabled"))return;e.addClass("disabled btn-gray")}Util.ajaxPost("/astore/isuserverified",{},function(o){"init"===s?o?e.removeClass("btn-gray disabled").addClass("btn-blue"):t.show():"retry"===s&&(o?(i.hide(),a.show(),t.hide(),n.removeClass("btn-gray disabled").addClass("btn-blue")):window.alert("你还未补全个人信息哦~"))},function(e){window.alert(e)},function(){window.alert("获取验证信息失败")},function(){"retry"===s&&e.removeClass("btn-gray disabled")})}document.getElementById("jquery-msg-content").style.filter="progid:DXImageTransform.Microsoft.gradient(startcolorstr=#AA164188,endcolorstr=#AA164188)";var s=this,i=$("#js-verify-comfrim"),a=$("#js-claim-comfirm"),t=$("#jquery-msg-content [data-tiper]"),n=$("#js-claim-service-btn");e(n,"init"),a.on("click","[data-fill-userinfo]",function(){i.show(),a.hide()}),i.on("click","[data-verify-succ]",function(){e($(this),"retry")}),i.on("click","[data-verify-problem]",function(){s.unblock()}),n.on("click",function(){var e=$(this);e.hasClass("disabled")||(e.addClass("disabled").text("申请中..."),Util.ajaxPost("/astore/serviceclaimapply",{serviceId:$("#js-service-detail").attr("data")},function(){s.unblock(),setTimeout(function(){showClaimSuccModal()},50)},function(e){window.alert(e),"你已认领该服务"===e&&s.unblock()},function(){window.alert("提交失败")},function(){e.removeClass("disabled").text("申请")}))}),$("#js_modal_close_icon").on("click",function(){s.unblock()})}})}})}function bindBasicEvent(){versionChangeEvent(),followEvent(),tabChangeEvent(),claimServiceEvent()}var Util=require("common:static/js/modules/util.js");exports.init=function(){bindBasicEvent(),bdShare()}});